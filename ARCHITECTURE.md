# Архитектура проекта telegram-audio-bot

## Обзор

Проект представляет собой Telegram-бота для улучшения качества аудио файлов. Архитектура проекта построена по принципам модульности и разделения ответственностей.

## Структура проекта

```
/workspace/
├── bot_refactored.py      # Основной файл с логикой бота
├── requirements.txt       # Зависимости Python
├── Dockerfile             # Определение контейнера
├── docker-compose.yml     # Оркестрация контейнеров
├── README.md              # Документация
├── .gitignore            # Файлы для игнорирования Git
└── ARCHITECTURE.md       # Этот файл
```

## Основные компоненты

### 1. AudioBot (класс)
- Основной класс бота
- Управляет взаимодействием с пользователем
- Обрабатывает команды и сообщения

### 2. UserSessionManager (класс)
- Управление сессиями пользователей
- Включает TTL (время жизни сессии)
- Предотвращает утечки памяти

### 3. AudioProcessor (класс)
- Обработка аудио файлов
- Анализ качества
- Улучшение звука
- Конвертация форматов

## Поток выполнения

1. Пользователь отправляет команду `/start`
2. Бот отображает меню с вариантами действий
3. Пользователь выбирает действие
4. Сессия пользователя сохраняется с TTL
5. Пользователь отправляет аудио файл
6. Бот проверяет файл на допустимый размер
7. Выполняется выбранное действие
8. Результат отправляется пользователю
9. Сессия удаляется

## Безопасность

- Ограничение размера файлов (до 50MB)
- Управление сессиями с TTL
- Использование отдельного пользователя в контейнере
- Очистка временных файлов

## Масштабируемость

- Архитектура позволяет легко масштабировать
- Возможность интеграции с Redis для хранения сессий
- Асинхронная обработка запросов

## Технологии

- **Python 3.11**: Язык программирования
- **python-telegram-bot**: Фреймворк для создания Telegram-ботов
- **pydub**: Обработка аудио файлов
- **numpy**: Математические вычисления
- **matplotlib**: Построение графиков
- **Docker**: Контейнеризация
- **docker-compose**: Оркестрация